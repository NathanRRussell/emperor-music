(function(){"use strict";var e={2147:function(e,n,t){var l=t(9242),a=t(3396);const s={class:"content"};function i(e,n,t,l,i,o){const r=(0,a.up)("Navbar"),u=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(r),(0,a._)("div",s,[(0,a.Wm)(u)])],64)}var o=t(7139),r=t.p+"img/emperor.31907932.png";const u=e=>((0,a.dD)("data-v-27ca9848"),e=e(),(0,a.Cn)(),e),c={class:"navbar"},d=u((()=>(0,a._)("img",{src:r},null,-1))),p={class:"links"},v={key:0},g={key:1};function m(e,n,t,l,s,i){const r=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("nav",null,[d,(0,a._)("h1",null,[(0,a.Wm)(r,{to:{name:"Home"}},{default:(0,a.w5)((()=>[(0,a.Uk)("Emperor Music")])),_:1})]),(0,a._)("div",p,[l.user?((0,a.wg)(),(0,a.iD)("div",v,[(0,a.Wm)(r,{to:{name:"CreatePlaylist"}},{default:(0,a.w5)((()=>[(0,a.Uk)("Create Playlist")])),_:1}),(0,a.Wm)(r,{to:{name:"UserPlaylists"}},{default:(0,a.w5)((()=>[(0,a.Uk)("My Playlists")])),_:1}),(0,a._)("span",null,"Welcome, "+(0,o.zw)(l.user.displayName),1),(0,a._)("button",{onClick:n[0]||(n[0]=(...e)=>l.handleClick&&l.handleClick(...e))},"Logout")])):((0,a.wg)(),(0,a.iD)("div",g,[(0,a.Wm)(r,{class:"btn",to:{name:"Signup"}},{default:(0,a.w5)((()=>[(0,a.Uk)("Signup")])),_:1}),(0,a.Wm)(r,{class:"btn",to:{name:"Login"}},{default:(0,a.w5)((()=>[(0,a.Uk)("Login")])),_:1})]))])])])}t(7658);var y=t(4870),h=t(4275);t(7618),t(4059),t(4742);const w={apiKey:"AIzaSyBAGDrjPQ6t8LEehihWgargfYT8-VRIhMw",authDomain:"muso-ninjas-bcc85.firebaseapp.com",projectId:"muso-ninjas-bcc85",storageBucket:"muso-ninjas-bcc85.appspot.com",messagingSenderId:"478800601060",appId:"1:478800601060:web:8936856c3722272e9a31f1"};h.Z.initializeApp(w);const f=h.Z.firestore(),k=h.Z.auth(),b=h.Z.storage(),_=h.Z.firestore.FieldValue.serverTimestamp,D=(0,y.iH)(null),P=(0,y.iH)(!1),H=async()=>{D.value=null,P.value=!0;try{await k.signOut(),P.value=!1}catch(e){console.log(e.message),D.value=e.message,P.value=!1}},S=()=>({error:D,logout:H,isPending:P});var C=S;const U=(0,y.iH)(k.currentUser);k.onAuthStateChanged((e=>{console.log("User state change. Current user is:",e),U.value=e}));const q=()=>({user:U});var I=q,A=t(2483),j={setup(){const{user:e}=I(),{logout:n}=C(),t=(0,A.tv)(),l=async()=>{await n(),console.log("user logged out"),t.push({name:"Login"})};return{handleClick:l,user:e}}},L=t(89);const z=(0,L.Z)(j,[["render",m],["__scopeId","data-v-27ca9848"]]);var E=z,V={components:{Navbar:E}};const W=(0,L.Z)(V,[["render",i]]);var Z=W;const N={class:"home"},O={key:0,class:"error"},M={key:1};function x(e,n,t,l,s,i){const o=(0,a.up)("ListView");return(0,a.wg)(),(0,a.iD)("div",N,[l.error?((0,a.wg)(),(0,a.iD)("div",O,"Could Not Fetch the Data")):(0,a.kq)("",!0),l.documents?((0,a.wg)(),(0,a.iD)("div",M,[(0,a.Wm)(o,{playlists:l.documents},null,8,["playlists"])])):(0,a.kq)("",!0)])}const F={class:"single"},T={class:"thumbnail"},Y=["src"],B={class:"info"},K={class:"song-number"};function R(e,n,t,l,s,i){const r=(0,a.up)("router-link");return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.playlists,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(r,{to:{name:"PlaylistDetails",params:{id:e.id}}},{default:(0,a.w5)((()=>[(0,a._)("div",F,[(0,a._)("div",T,[(0,a._)("img",{src:e.coverUrl},null,8,Y)]),(0,a._)("div",B,[(0,a._)("h3",null,(0,o.zw)(e.title),1),(0,a._)("p",null,"Created by "+(0,o.zw)(e.username),1)]),(0,a._)("div",K,[(0,a._)("p",null,(0,o.zw)(e.songs.length),1)])])])),_:2},1032,["to"])])))),128)}var $={props:["playlists"]};const G=(0,L.Z)($,[["render",R],["__scopeId","data-v-5eb6973c"]]);var Q=G;const J=(e,n)=>{const t=(0,y.iH)(null),l=(0,y.iH)(null);let s=f.collection(e).orderBy("createdAt");n&&(s=s.where(...n));const i=s.onSnapshot((e=>{let n=[];e.docs.forEach((e=>{e.data().createdAt&&n.push({...e.data(),id:e.id})})),t.value=n,l.value=null}),(e=>{console.log(e.message),t.value=null,l.value="could not fetch the data"}));return(0,a.m0)((e=>{e((()=>i()))})),{error:l,documents:t}};var X=J,ee={name:"Home",components:{ListView:Q},setup(){const{error:e,documents:n}=X("playlists");return{error:e,documents:n}}};const ne=(0,L.Z)(ee,[["render",x]]);var te=ne;const le=(0,a._)("h3",null,"Login",-1),ae={key:0,class:"error"},se={key:1},ie={key:2,disabled:""};function oe(e,n,t,s,i,r){return(0,a.wg)(),(0,a.iD)("form",{onSubmit:n[2]||(n[2]=(0,l.iM)(((...e)=>s.handleSubmit&&s.handleSubmit(...e)),["prevent"]))},[le,(0,a.wy)((0,a._)("input",{type:"email",placeholder:"Email","onUpdate:modelValue":n[0]||(n[0]=e=>s.email=e)},null,512),[[l.nr,s.email]]),(0,a.wy)((0,a._)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":n[1]||(n[1]=e=>s.password=e)},null,512),[[l.nr,s.password]]),s.error?((0,a.wg)(),(0,a.iD)("div",ae,(0,o.zw)(s.error),1)):(0,a.kq)("",!0),s.isPending?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",se,"Log in")),s.isPending?((0,a.wg)(),(0,a.iD)("button",ie,"Loading")):(0,a.kq)("",!0)],32)}const re=(0,y.iH)(null),ue=(0,y.iH)(!1),ce=async(e,n)=>{re.value=null,ue.value=!0;try{const t=await k.signInWithEmailAndPassword(e,n);return re.value=null,ue.value=!1,t}catch(t){console.log(t.message),re.value="Incorrect login credentials",ue.value=!1}},de=()=>({error:re,login:ce,isPending:ue});var pe=de,ve={setup(){const{error:e,login:n,isPending:t}=pe(),l=(0,A.tv)(),a=(0,y.iH)(""),s=(0,y.iH)(""),i=async()=>{await n(a.value,s.value);e.value||l.push({name:"UserPlaylists"})};return{email:a,password:s,handleSubmit:i,error:e,isPending:t}}};const ge=(0,L.Z)(ve,[["render",oe]]);var me=ge;const ye=(0,a._)("h3",null,"Sign Up",-1),he={key:0,class:"error"},we={key:1},fe={key:2,disabled:""};function ke(e,n,t,s,i,r){return(0,a.wg)(),(0,a.iD)("form",{onSubmit:n[3]||(n[3]=(0,l.iM)(((...e)=>s.handleSubmit&&s.handleSubmit(...e)),["prevent"]))},[ye,(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Display Name","onUpdate:modelValue":n[0]||(n[0]=e=>s.displayName=e)},null,512),[[l.nr,s.displayName]]),(0,a.wy)((0,a._)("input",{type:"email",placeholder:"Email","onUpdate:modelValue":n[1]||(n[1]=e=>s.email=e)},null,512),[[l.nr,s.email]]),(0,a.wy)((0,a._)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":n[2]||(n[2]=e=>s.password=e)},null,512),[[l.nr,s.password]]),s.error?((0,a.wg)(),(0,a.iD)("div",he,(0,o.zw)(s.error),1)):(0,a.kq)("",!0),s.isPending?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",we,"Sign Up")),s.isPending?((0,a.wg)(),(0,a.iD)("button",fe,"Loading")):(0,a.kq)("",!0)],32)}const be=(0,y.iH)(null),_e=(0,y.iH)(!1),De=async(e,n,t)=>{be.value=null,_e.value=!0;try{const l=await k.createUserWithEmailAndPassword(e,n);if(!l)throw new Error("Could not complete signup");return await l.user.updateProfile({displayName:t}),be.value=null,_e.value=!1,l}catch(l){console.log(l.message),be.value=l.message,_e.value=!1}},Pe=()=>({error:be,signup:De,isPending:_e});var He=Pe,Se={setup(){const{error:e,signup:n,isPending:t}=He(),l=(0,A.tv)(),a=(0,y.iH)(""),s=(0,y.iH)(""),i=(0,y.iH)(""),o=async()=>{await n(s.value,i.value,a.value);e.value||l.push({name:"UserPlaylists"})};return{displayName:a,email:s,password:i,isPending:t,handleSubmit:o,error:e}}};const Ce=(0,L.Z)(Se,[["render",ke]]);var Ue=Ce;const qe=(0,a._)("h4",null,"Create New Playlist",-1),Ie=(0,a._)("label",null,"Upload Playlist Cover Image",-1),Ae={class:"error"},je=(0,a._)("div",{class:"error"},null,-1),Le={key:0},ze={key:1,disabled:""};function Ee(e,n,t,s,i,r){return(0,a.wg)(),(0,a.iD)("form",{onSubmit:n[3]||(n[3]=(0,l.iM)(((...e)=>s.handleSubmit&&s.handleSubmit(...e)),["prevent"]))},[qe,(0,a.wy)((0,a._)("input",{type:"text",required:"",placeholder:"Playlist Title","onUpdate:modelValue":n[0]||(n[0]=e=>s.title=e)},null,512),[[l.nr,s.title]]),(0,a.wy)((0,a._)("textarea",{required:"",placeholder:"Playlist Description...","onUpdate:modelValue":n[1]||(n[1]=e=>s.description=e)},null,512),[[l.nr,s.description]]),Ie,(0,a._)("input",{type:"file",onChange:n[2]||(n[2]=(...e)=>s.handleChange&&s.handleChange(...e))},null,32),(0,a._)("div",Ae,(0,o.zw)(s.fileError),1),je,s.isPending?((0,a.wg)(),(0,a.iD)("button",ze,"Saving...")):((0,a.wg)(),(0,a.iD)("button",Le,"Create"))],32)}const{user:Ve}=I(),We=()=>{const e=(0,y.iH)(null),n=(0,y.iH)(null),t=(0,y.iH)(null),l=async l=>{t.value=`covers/${Ve.value.uid}/${l.name}`;const a=b.ref(t.value);try{const e=await a.put(l);n.value=await e.ref.getDownloadURL()}catch(s){console.log(s.message),e.value=s.message}},a=async n=>{const t=b.ref(n);try{t.delete()}catch(l){console.log(l.message),e.value=l.message}};return{url:n,filePath:t,error:e,uploadImage:l,deleteImage:a}};var Ze=We;const Ne=e=>{const n=(0,y.iH)(null),t=(0,y.iH)(!1),l=async l=>{n.value=null,t.value=!0;try{const n=await f.collection(e).add(l);return t.value=!1,n}catch(a){console.log(a.message),n.value="could not send the message",t.value=!1}};return{error:n,addDoc:l,isPending:t}};var Oe=Ne,Me={setup(){const{filePath:e,url:n,uploadImage:t}=Ze(),{error:l,addDoc:a}=Oe("playlists"),{user:s}=I(),i=(0,A.tv)(),o=(0,y.iH)(""),r=(0,y.iH)(""),u=(0,y.iH)(null),c=(0,y.iH)(null),d=(0,y.iH)(!1),p=async()=>{if(u.value){d.value=!0,await t(u.value);const c=await a({title:o.value,description:r.value,userId:s.value.uid,username:s.value.displayName,coverUrl:n.value,filePath:e.value,songs:[],createdAt:_()});d.value=!1,l.value||i.push({name:"PlaylistDetails",params:{id:c.id}})}},v=["image/png","image/jpeg"],g=e=>{const n=e.target.files[0];console.log(n),n&&v.includes(n.type)?(u.value=n,c.value=null):(u.value=null,c.value="Please Select an Image File (png or jpg)")};return{title:o,description:r,handleSubmit:p,handleChange:g,fileError:c,isPending:d}}};const xe=(0,L.Z)(Me,[["render",Ee]]);var Fe=xe;const Te={key:0,class:"error"},Ye={key:1,class:"playlist-details"},Be={class:"playlist-info"},Ke={class:"cover"},Re=["src"],$e={class:"username"},Ge={class:"description"},Qe={class:"song-list"},Je={key:0},Xe={class:"details"},en=["onClick"];function nn(e,n,t,l,s,i){const r=(0,a.up)("AddSong");return(0,a.wg)(),(0,a.iD)(a.HY,null,[l.error?((0,a.wg)(),(0,a.iD)("div",Te,(0,o.zw)(l.error),1)):(0,a.kq)("",!0),l.playlist?((0,a.wg)(),(0,a.iD)("div",Ye,[(0,a._)("div",Be,[(0,a._)("div",Ke,[(0,a._)("img",{src:l.playlist.coverUrl},null,8,Re)]),(0,a._)("h2",null,(0,o.zw)(l.playlist.title),1),(0,a._)("p",$e,"Created by "+(0,o.zw)(l.playlist.username),1),(0,a._)("p",Ge,(0,o.zw)(l.playlist.description),1),l.ownership?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:n[0]||(n[0]=(...e)=>l.handleDelete&&l.handleDelete(...e))},"Delete Playlist")):(0,a.kq)("",!0)]),(0,a._)("div",Qe,[l.playlist.songs.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Je,"No Songs Have Been Added to this Playlist Yet")),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.playlist.songs,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"single-song"},[(0,a._)("div",Xe,[(0,a._)("h3",null,(0,o.zw)(e.title),1),(0,a._)("p",null,(0,o.zw)(e.artist),1)]),l.ownership?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:n=>l.handleClick(e.id)},"Delete",8,en)):(0,a.kq)("",!0)])))),128)),l.ownership?((0,a.wg)(),(0,a.j4)(r,{key:1,playlist:l.playlist},null,8,["playlist"])):(0,a.kq)("",!0)])])):(0,a.kq)("",!0)],64)}const tn=(e,n)=>{const t=(0,y.iH)(null),l=(0,y.iH)(!1);let a=f.collection(e).doc(n);const s=async()=>{l.value=!0,t.value=null;try{const e=await a.delete();return l.value=!1,e}catch(e){console.log(e.message),l.value=!1,t.value="could not delete the document"}},i=async e=>{l.value=!0,t.value=null;try{const n=await a.update(e);return l.value=!1,n}catch(n){console.log(n.message),l.value=!1,t.value="could not update the document"}};return{error:t,isPending:l,deleteDoc:s,updateDoc:i}};var ln=tn;const an=(e,n)=>{const t=(0,y.iH)(null),l=(0,y.iH)(null);let s=f.collection(e).doc(n);const i=s.onSnapshot((e=>{e.data()?(t.value={...e.data(),id:e.id},l.value=null):l.value="that document does not exist"}),(e=>{console.log(e.message),l.value="could not fetch the document"}));return(0,a.m0)((e=>{e((()=>i()))})),{error:l,document:t}};var sn=an;const on=e=>((0,a.dD)("data-v-57917871"),e=e(),(0,a.Cn)(),e),rn={class:"add-song"},un=on((()=>(0,a._)("h4",null,"Add a New Song",-1))),cn=on((()=>(0,a._)("button",null,"Add",-1)));function dn(e,n,t,s,i,o){return(0,a.wg)(),(0,a.iD)("div",rn,[s.showForm?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:n[0]||(n[0]=e=>s.showForm=!0)},"Add Songs")),s.showForm?((0,a.wg)(),(0,a.iD)("form",{key:1,onSubmit:n[3]||(n[3]=(0,l.iM)(((...e)=>s.handleSubmit&&s.handleSubmit(...e)),["prevent"]))},[un,(0,a.wy)((0,a._)("input",{required:"",type:"text",placeholder:"Song Title","onUpdate:modelValue":n[1]||(n[1]=e=>s.title=e)},null,512),[[l.nr,s.title]]),(0,a.wy)((0,a._)("input",{required:"",type:"text",placeholder:"Artist","onUpdate:modelValue":n[2]||(n[2]=e=>s.artist=e)},null,512),[[l.nr,s.artist]]),cn],32)):(0,a.kq)("",!0)])}var pn={props:["playlist"],setup(e){const n=(0,y.iH)(""),t=(0,y.iH)(""),l=(0,y.iH)(!1),{updateDoc:a}=ln("playlists",e.playlist.id),s=async()=>{const l={title:n.value,artist:t.value,id:Math.floor(1e6*Math.random())};await a({songs:[...e.playlist.songs,l]}),n.value="",t.value=""};return{title:n,artist:t,showForm:l,handleSubmit:s}}};const vn=(0,L.Z)(pn,[["render",dn],["__scopeId","data-v-57917871"]]);var gn=vn,mn={props:["id"],components:{AddSong:gn},setup(e){const{error:n,document:t}=sn("playlists",e.id),{user:l}=I(),{deleteDoc:s,updateDoc:i}=ln("playlists",e.id),{deleteImage:o}=Ze(),r=(0,A.tv)(),u=(0,a.Fl)((()=>t.value&&l.value&&l.value.uid==t.value.userId)),c=async()=>{await o(t.value.filePath),await s(),r.push({name:"Home"})},d=async e=>{const n=t.value.songs.filter((n=>n.id!=e));await i({songs:n})};return{error:n,playlist:t,ownership:u,handleDelete:c,handleClick:d}}};const yn=(0,L.Z)(mn,[["render",nn]]);var hn=yn;const wn={class:"user-playlists"},fn=(0,a._)("h2",null,"My Playlists",-1),kn={key:0};function bn(e,n,t,l,s,i){const o=(0,a.up)("ListView"),r=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",wn,[fn,l.playlists?((0,a.wg)(),(0,a.iD)("div",kn,[(0,a.Wm)(o,{playlists:l.playlists},null,8,["playlists"])])):(0,a.kq)("",!0),(0,a.Wm)(r,{to:{name:"CreatePlaylist"},class:"btn"},{default:(0,a.w5)((()=>[(0,a.Uk)("Create a New Playlist")])),_:1})])}var _n={components:{ListView:Q},setup(){const{user:e}=I(),{documents:n}=X("playlists",["userId","==",e.value.uid]);return console.log(n),{playlists:n}}};const Dn=(0,L.Z)(_n,[["render",bn]]);var Pn=Dn;const Hn=(e,n,t)=>{let l=k.currentUser;l?t():t({name:"Login"})},Sn=[{path:"/",name:"Home",component:te,beforeEnter:Hn},{path:"/login",name:"Login",component:me},{path:"/signup",name:"Signup",component:Ue},{path:"/playlists/create",name:"CreatePlaylist",component:Fe,beforeEnter:Hn},{path:"/playlists/:id",name:"PlaylistDetails",component:hn,beforeEnter:Hn,props:!0},{path:"/playlists/user",name:"UserPlaylists",component:Pn,beforeEnter:Hn}],Cn=(0,A.p7)({history:(0,A.PO)("/"),routes:Sn});var Un=Cn;let qn;k.onAuthStateChanged((()=>{qn||(qn=(0,l.ri)(Z).use(Un).mount("#app"))}))}},n={};function t(l){var a=n[l];if(void 0!==a)return a.exports;var s=n[l]={exports:{}};return e[l](s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(n,l,a,s){if(!l){var i=1/0;for(c=0;c<e.length;c++){l=e[c][0],a=e[c][1],s=e[c][2];for(var o=!0,r=0;r<l.length;r++)(!1&s||i>=s)&&Object.keys(t.O).every((function(e){return t.O[e](l[r])}))?l.splice(r--,1):(o=!1,s<i&&(i=s));if(o){e.splice(c--,1);var u=a();void 0!==u&&(n=u)}}return n}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[l,a,s]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var l in n)t.o(n,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:n[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.p="/"}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,l){var a,s,i=l[0],o=l[1],r=l[2],u=0;if(i.some((function(n){return 0!==e[n]}))){for(a in o)t.o(o,a)&&(t.m[a]=o[a]);if(r)var c=r(t)}for(n&&n(l);u<i.length;u++)s=i[u],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(c)},l=self["webpackChunkmuso_ninjas"]=self["webpackChunkmuso_ninjas"]||[];l.forEach(n.bind(null,0)),l.push=n.bind(null,l.push.bind(l))}();var l=t.O(void 0,[998],(function(){return t(2147)}));l=t.O(l)})();
//# sourceMappingURL=app.05c6fa4a.js.map